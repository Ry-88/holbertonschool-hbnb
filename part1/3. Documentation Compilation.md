# HBnB Project – Technical Architecture & Design Document

## Introduction
The HBnB project is a web-based platform designed to replicate and extend functionalities similar to Airbnb.  
This document consolidates all architecture and design artifacts created in earlier tasks into a comprehensive technical reference.  

**Purpose of this document**:
- Serve as a blueprint for the implementation phases of the HBnB project.  
- Provide clarity on system architecture, business logic, and API interactions.  
- Ensure consistency and accuracy across all development efforts.  

**Scope**:  
The document includes high-level architecture diagrams, detailed class diagrams for the business logic layer, and sequence diagrams for API interactions, along with explanatory notes for each.

---

## High-Level Architecture

### Package Diagram
![alt text](image.png)
Explanation

Layered Architecture: The system is divided into distinct layers (UI, API, Business Logic, Data) to enforce separation of concerns.

Facade Pattern: The API acts as a facade, exposing simplified endpoints for client interactions while hiding internal complexities.

Scalability: This design supports modular expansion and easier maintenance.
##
## Business Logic Layer
Class Diagram
```mermaid
classDiagram
    class BaseEntity {
        - UUID id
        - DateTime created_at
        - DateTime updated_at
        + void save()
        + void delete()
    }

    class User {
        - String name
        - String email
        - String password_hash
        + Boolean authenticate(password)
        + void update_profile(data)
        + void delete_account()
    }

    class Place {
        - String title
        - String description
        - String address
        - String city
        - Float price_per_night
        + void update_details(data)
        + Float calculate_average_rating()
        + void add_amenity(amenity)
    }

    class Review {
        - Integer rating
        - String comment
        + void edit_review(new_comment, new_rating)
        + void delete_review()
    }

    class Amenity {
        - String name
        - String description
        + void update_info(data)
    }

    %% Inheritance
    BaseEntity <|-- User
    BaseEntity <|-- Place
    BaseEntity <|-- Review
    BaseEntity <|-- Amenity

    %% Relationships
    User "1" --> "0..*" Place : owns
    User "1" --> "0..*" Review : writes
    Place "1" --> "0..*" Review : has
    Place "0..*" --> "0..*" Amenity : includes
```
Explanation

Entities:

User: Represents application users with authentication logic.

Place: Represents listings, including attributes like location and pricing.

Reservation: Represents bookings tied to users and places.

Relationships:

A User can make many Reservations.

A Reservation is tied to exactly one Place.

Design Decisions: Normalized structure to ensure clear ownership and data integrity.
##
## API Interaction Flow
Sequence Diagrams
## User Registration
```mermaid
sequenceDiagram
    participant Client
    participant UserService
    participant ApplicationFacade
    participant User
    participant UserRepository
    participant Database

    Client->>UserService: POST /api/users/register (name, email, password)
    UserService->>ApplicationFacade: registerUser(data)
    ApplicationFacade->>User: create(name, email, password_hash)
    User->>UserRepository: save(user)
    UserRepository->>Database: INSERT User
    Database-->>UserRepository: success
    UserRepository-->>User: user saved
    User-->>ApplicationFacade: user created
    ApplicationFacade-->>UserService: return success (user_id)
    UserService-->>Client: 201 Created + user info
```
##
## Place Creation
```mermaid
sequenceDiagram
    participant Client
    participant PlaceService
    participant ApplicationFacade
    participant Place
    participant PlaceRepository
    participant Database

    Client->>PlaceService: POST /api/places (title, description, ...)
    PlaceService->>ApplicationFacade: createPlace(data, user_id)
    ApplicationFacade->>Place: create(title, description, address, price)
    Place->>PlaceRepository: save(place)
    PlaceRepository->>Database: INSERT Place
    Database-->>PlaceRepository: success
    PlaceRepository-->>Place: place saved
    Place-->>ApplicationFacade: place created
    ApplicationFacade-->>PlaceService: return success (place_id)
    PlaceService-->>Client: 201 Created + place info
```
##
## Review Submission
```mermaid
sequenceDiagram
    participant Client
    participant ReviewService
    participant ApplicationFacade
    participant Review
    participant ReviewRepository
    participant Database

    Client->>ReviewService: POST /api/reviews (rating, comment, place_id)
    ReviewService->>ApplicationFacade: submitReview(data, user_id)
    ApplicationFacade->>Review: create(rating, comment, user, place)
    Review->>ReviewRepository: save(review)
    ReviewRepository->>Database: INSERT Review
    Database-->>ReviewRepository: success
    ReviewRepository-->>Review: review saved
    Review-->>ApplicationFacade: review created
    ApplicationFacade-->>ReviewService: return success (review_id)
    ReviewService-->>Client: 201 Created + review info
```
##
## Fetching a List of Places
```mermaid
sequenceDiagram
    participant Client
    participant PlaceService
    participant ApplicationFacade
    participant PlaceRepository
    participant Database

    Client->>PlaceService: GET /api/places?city=NYC
    PlaceService->>ApplicationFacade: getPlaces(criteria)
    ApplicationFacade->>PlaceRepository: findByCriteria(criteria)
    PlaceRepository->>Database: SELECT * FROM places WHERE city=NYC
    Database-->>PlaceRepository: result set
    PlaceRepository-->>ApplicationFacade: list of places
    ApplicationFacade-->>PlaceService: return places
    PlaceService-->>Client: 200 OK + places list
```
Explanation

Flow:

User sends a reservation request.

API validates and forwards it to the Business Logic Layer.

Business Logic interacts with the database to create the reservation.

The response flows back through the API to the user.

Design Decision: The API gateway enforces validation and authentication, ensuring that the business layer only processes valid requests.

## Conclusion

This document consolidates HBnB’s system design into a single reference.
It provides a clear overview of the system’s layered architecture, detailed insights into the business logic classes, and interaction flows for API calls.

By following this blueprint, the development team can ensure consistency, scalability, and maintainability throughout the project lifecycle.
## Authors

- **Rayan Hantoul** [Rayan ](https://github.com/Ry-88)
- **Mohammed Alayda** [Mohammed](https://github.com/moha88z)
- **Raed Alqabas** [Raed](https://github.com/Raed-Alqabas)